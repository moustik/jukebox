<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Jukebox Reloaded</title>
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
	<link rel="stylesheet" type="text/css" href="css/style.css" />
	<link rel="stylesheet" type="text/css" href="css/fileuploader.css" />
</head>
<body>

<header>
	<div id="notifications"></div>
</header>

<div role="main" id="page_wrapper">

	<div id="header">
		Canal : <input type="text" id="channel" /><input type="button" id="btnJoinChannel" value="Rejoindre" />
		<span id="expand_collection_button">&gt;</span>
		<span id="collapse_collection_button">&lt;</span>
		<span id="activity_monitor"></span>
	</div>
	
	<div id="player">
		<div id="player_controls">
			<span id="previous_button"></span><span id="next_button"></span>
			<p id="player_song_title"></p>

			<div id="progressbar_wrapper">
				<div id="progressbar"></div>
				<p id="player_song_time"></p>
			</div>
		</div>

		<div id="player_playlist">
			<div id="play_queue_content"></div>
		</div>
	</div>
	
	<div id="music_collection_wrapper">
		<div id="tab_links">
			<a id="tab_upload">Upload</a>
			<a id="tab_query">Query</a>
			<a id="tab_notifs">Notifications</a>
			<a id="tab_debug">Debug</a>
		</div>
		<div id="collection_header">
			Rechercher : <input type="text" id="search_input" />
			<select id="search_genres" style="display:none;"></select>
			<select id="search_field">
				<option value="artist">artiste</option>
				<option value="title">title</option>
				<option value="album">album</option>
				<option value="genre">genre</option>
			</select> 
			<select id="results_per_page">
				<option value="10">10</option>
				<option value="20" selected="selected">20</option>
				<option value="30">30</option>
				<option value="40">40</option>
				<option value="50">50</option>
				<option value="60">60</option>
				<option value="70">70</option>
				<option value="80">80</option>
				<option value="90">90</option>
				<option value="100">100</option>
			</select> 
			<input id="btnSearch" type="button" value="Rechercher" />
		</div>
		<div id="tabsHeader"></div>
		<div id="tabscontent"></div>
	</div>
	
	<div id="footer">
		<input id="btnRefresh" type="button" value="Refresh" />
		<input type="checkbox" value="autorefresh" id="cb_autorefresh" checked="checked" /><label for="cb_autorefresh"> Autorefresh</label>
		<br />
		Plugin : <input type="text" id="music_selection_plugin" value="default" style="width: 100px;" />
		<input id="btnApplyPlugin" type="button" value="Appliquer" />
	</div>
	
	<a id="play_stream">Play stream</a>
	<a id="stop_stream">Stop stream</a>
</div>

<footer></footer>

<script type="text/javascript" src="js/lib/json2.js"></script>
<script type="text/javascript" src="js/lib/prototype.js"></script>
<script type="text/javascript" src="js/lib/scriptaculous.js?load=effects,dragdrop,slider"></script>
<script type="text/javascript" src="js/lib/tablekit.js"></script>
<script type="text/javascript" src="js/lib/fileuploader.js"></script>
<script type="text/javascript" src="js/lib/Sound.js"></script>
<script type="text/javascript" src="js/tabs.js"></script>
<script type="text/javascript" src="js/genres.js"></script>
<script type="text/javascript" src="js/library.js"></script>
<script type="text/javascript" src="js/search.js"></script>
<script type="text/javascript" src="js/MusicFieldEditor.js"></script>
<script type="text/javascript" src="js/upload.js"></script>
<script type="text/javascript" src="js/debug.js"></script>
<script type="text/javascript" src="js/customQueries.js"></script>
<script type="text/javascript" src="js/notification.js"></script>
<script type="text/javascript" src="js/StreamPlayer.js"></script>
<script type="text/javascript" src="js/jukebox.js"></script>
<script type="text/javascript">
document.observe("dom:loaded", function()
{
	try
	{
		ExpandCollection();
		initJukebox();

		// ---------------
		// Declare listeners

		$("btnJoinChannel").on("click", joinChannel);
		$("expand_collection_button").on("click", ExpandCollection);
		$("collapse_collection_button").on("click", CollapseCollection);

		$("previous_button").on("click", previousSong);
		$("next_button").on("click", nextSong);

		$("tab_upload").on("click", addOrSelectUploadTab);
		$("tab_query").on("click", addOrSelectCustomQueriesTab);
		$("tab_notifs").on("click", addOrSelectNotificationTab);
		$("tab_debug").on("click", addOrSelectDebugTab);

		$("search_field").on("change", selectAndFillGenres);
		$("btnSearch").on("click", function() // Protects from event args
		{
			doSearch();
		});

		$("btnRefresh").on("change", function()
		{
			timestamp = 0; //TODO: avoid global
			updateJukebox();
		});

		$("btnApplyPlugin").on("click", setSongSelectionPlugin);

		$("play_stream").on("click", PlayStream);
		$("stop_stream").on("click", StopStream);
	}
	catch(fatalE)
	{
		//TODO
	}
});
</script>
</body>
</html>
